/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./example/Example.js":
/*!****************************!*\
  !*** ./example/Example.js ***!
  \****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst Geometry_1 = __webpack_require__(/*! ../src/Geometry */ \"./src/Geometry.js\");\r\nconst Material_1 = __webpack_require__(/*! ../src/Material */ \"./src/Material.js\");\r\nconst Renderer_1 = __webpack_require__(/*! ../src/Renderer */ \"./src/Renderer.js\");\r\nconst glslang_1 = __importDefault(__webpack_require__(/*! ./libs/glslang */ \"./example/libs/glslang.js\"));\r\nconst fractal_1 = __webpack_require__(/*! ./shaders/glsl/fractal */ \"./example/shaders/glsl/fractal.js\");\r\nconst samples_1 = __webpack_require__(/*! ./meshes/samples */ \"./example/meshes/samples.js\");\r\nconst Scene_1 = __webpack_require__(/*! ../src/Scene */ \"./src/Scene.js\");\r\nconst Mesh_1 = __webpack_require__(/*! ../src/Mesh */ \"./src/Mesh.js\");\r\ndocument.addEventListener(\"DOMContentLoaded\", () => __awaiter(void 0, void 0, void 0, function* () {\r\n    const canvas = document.querySelector('canvas');\r\n    const renderer = new Renderer_1.Renderer(canvas);\r\n    const device = yield renderer.getDevice();\r\n    /*\r\n          glslang compile GLSL - > SPIR-V , in this case an fragmentshader in glsl version 4.5\r\n    */\r\n    const glsl = yield glslang_1.default();\r\n    let compiledShader = glsl.compileGLSL(fractal_1.fractalShader.fragment, \"fragment\", false);\r\n    const myMaterial = Material_1.Material.createMaterialShader(fractal_1.fractalShader.vertex, compiledShader, \"main\", \"main\");\r\n    //const material = new Material(device, cloudShader);\r\n    const material = new Material_1.Material(device, myMaterial);\r\n    const geometry = new Geometry_1.Geometry(device, samples_1.rectGeometry);\r\n    const samplers = [{\r\n            addressModeU: 'repeat',\r\n            addressModeV: 'repeat',\r\n            magFilter: 'linear',\r\n            minFilter: 'nearest' // linear sampler, binding 2, as uniforms is bound to 1    \r\n        }];\r\n    const textures = [{\r\n            key: \"textureA\",\r\n            path: \"assets/channel0.jpg\"\r\n        },\r\n        {\r\n            key: \"textureB\",\r\n            path: \"assets/channel1.jpg\"\r\n        }\r\n    ];\r\n    const scene = new Scene_1.Scene(\"example\", device, canvas);\r\n    const mesh = new Mesh_1.Mesh(device, geometry, material, textures.length);\r\n    scene.addMesh(\"example\", mesh);\r\n    yield scene.build(\"example\", undefined, textures, samplers);\r\n    yield renderer.addScene(scene);\r\n    renderer.start(0);\r\n}));\r\n\n\n//# sourceURL=webpack://demolishedwebgpu/./example/Example.js?");

/***/ }),

/***/ "./example/libs/glslang.js":
/*!*********************************!*\
  !*** ./example/libs/glslang.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* module decorator */ module = __webpack_require__.hmd(module);\n\nvar Module = (function() {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  \n  return (\nfunction(Module) {\n  Module = Module || {};\n\nvar c;c||(c=typeof Module !== 'undefined' ? Module : {});\nc.compileGLSLZeroCopy=function(a,b,d,e){d=!!d;switch(b){case \"vertex\":var g=0;break;case \"fragment\":g=4;break;case \"compute\":g=5;break;default:throw Error(\"shader_stage must be 'vertex', 'fragment', or 'compute'.\");}switch(e||\"1.0\"){case \"1.0\":var f=65536;break;case \"1.1\":f=65792;break;case \"1.2\":f=66048;break;case \"1.3\":f=66304;break;case \"1.4\":f=66560;break;case \"1.5\":f=66816;break;default:throw Error(\"spirv_version must be '1.0' ~ '1.5'.\");}e=c._malloc(4);b=c._malloc(4);var h=aa([a,g,d,f,e,b]);\nd=k(e);a=k(b);c._free(e);c._free(b);if(0===h)throw Error(\"GLSL compilation failed\");e={};d/=4;e.data=c.HEAPU32.subarray(d,d+a);e.free=function(){c._destroy_output_buffer(h)};return e};c.compileGLSL=function(a,b,d,e){a=c.compileGLSLZeroCopy(a,b,d,e);b=a.data.slice();a.free();return b};var p={},q;for(q in c)c.hasOwnProperty(q)&&(p[q]=c[q]);var r=\"./this.program\",t=!1,u=!1;t=\"object\"===typeof window;u=\"function\"===typeof importScripts;var v=\"\",w;\nif(t||u)u?v=self.location.href:document.currentScript&&(v=document.currentScript.src),_scriptDir&&(v=_scriptDir),0!==v.indexOf(\"blob:\")?v=v.substr(0,v.lastIndexOf(\"/\")+1):v=\"\",u&&(w=function(a){var b=new XMLHttpRequest;b.open(\"GET\",a,!1);b.responseType=\"arraybuffer\";b.send(null);return new Uint8Array(b.response)});var x=c.print||console.log.bind(console),y=c.printErr||console.warn.bind(console);for(q in p)p.hasOwnProperty(q)&&(c[q]=p[q]);p=null;c.thisProgram&&(r=c.thisProgram);var A;\nc.wasmBinary&&(A=c.wasmBinary);\"object\"!==typeof WebAssembly&&y(\"no native wasm support detected\");function k(a){var b=\"i32\";\"*\"===b.charAt(b.length-1)&&(b=\"i32\");switch(b){case \"i1\":return B[a>>0];case \"i8\":return B[a>>0];case \"i16\":return ba[a>>1];case \"i32\":return C[a>>2];case \"i64\":return C[a>>2];case \"float\":return ca[a>>2];case \"double\":return da[a>>3];default:D(\"invalid type for getValue: \"+b)}return null}var E,ea=new WebAssembly.Table({initial:859,maximum:859,element:\"anyfunc\"}),fa=!1;\nfunction ha(){var a=c._convert_glsl_to_spirv;a||D(\"Assertion failed: Cannot call unknown function convert_glsl_to_spirv, make sure it is exported\");return a}\nfunction aa(a){var b=\"string number boolean number number number\".split(\" \"),d={string:function(a){var b=0;if(null!==a&&void 0!==a&&0!==a){var d=(a.length<<2)+1;b=G(d);ia(a,H,b,d)}return b},array:function(a){var b=G(a.length);B.set(a,b);return b}},e=ha(),g=[],f=0;if(a)for(var h=0;h<a.length;h++){var n=d[b[h]];n?(0===f&&(f=ja()),g[h]=n(a[h])):g[h]=a[h]}a=e.apply(null,g);0!==f&&ka(f);return a}var la=\"undefined\"!==typeof TextDecoder?new TextDecoder(\"utf8\"):void 0;\nfunction I(a,b,d){var e=b+d;for(d=b;a[d]&&!(d>=e);)++d;if(16<d-b&&a.subarray&&la)return la.decode(a.subarray(b,d));for(e=\"\";b<d;){var g=a[b++];if(g&128){var f=a[b++]&63;if(192==(g&224))e+=String.fromCharCode((g&31)<<6|f);else{var h=a[b++]&63;g=224==(g&240)?(g&15)<<12|f<<6|h:(g&7)<<18|f<<12|h<<6|a[b++]&63;65536>g?e+=String.fromCharCode(g):(g-=65536,e+=String.fromCharCode(55296|g>>10,56320|g&1023))}}else e+=String.fromCharCode(g)}return e}\nfunction ia(a,b,d,e){if(0<e){e=d+e-1;for(var g=0;g<a.length;++g){var f=a.charCodeAt(g);if(55296<=f&&57343>=f){var h=a.charCodeAt(++g);f=65536+((f&1023)<<10)|h&1023}if(127>=f){if(d>=e)break;b[d++]=f}else{if(2047>=f){if(d+1>=e)break;b[d++]=192|f>>6}else{if(65535>=f){if(d+2>=e)break;b[d++]=224|f>>12}else{if(d+3>=e)break;b[d++]=240|f>>18;b[d++]=128|f>>12&63}b[d++]=128|f>>6&63}b[d++]=128|f&63}}b[d]=0}}\"undefined\"!==typeof TextDecoder&&new TextDecoder(\"utf-16le\");var J,B,H,ba,C,ca,da;\nfunction ma(a){J=a;c.HEAP8=B=new Int8Array(a);c.HEAP16=ba=new Int16Array(a);c.HEAP32=C=new Int32Array(a);c.HEAPU8=H=new Uint8Array(a);c.HEAPU16=new Uint16Array(a);c.HEAPU32=new Uint32Array(a);c.HEAPF32=ca=new Float32Array(a);c.HEAPF64=da=new Float64Array(a)}var na=c.TOTAL_MEMORY||16777216;c.wasmMemory?E=c.wasmMemory:E=new WebAssembly.Memory({initial:na/65536});E&&(J=E.buffer);na=J.byteLength;ma(J);C[84916]=5582704;\nfunction K(a){for(;0<a.length;){var b=a.shift();if(\"function\"==typeof b)b();else{var d=b.J;\"number\"===typeof d?void 0===b.H?c.dynCall_v(d):c.dynCall_vi(d,b.H):d(void 0===b.H?null:b.H)}}}var oa=[],pa=[],qa=[],ra=[];function sa(){var a=c.preRun.shift();oa.unshift(a)}var L=0,M=null,N=null;c.preloadedImages={};c.preloadedAudios={};function D(a){if(c.onAbort)c.onAbort(a);x(a);y(a);fa=!0;throw new WebAssembly.RuntimeError(\"abort(\"+a+\"). Build with -s ASSERTIONS=1 for more info.\");}\nfunction ta(){var a=O;return String.prototype.startsWith?a.startsWith(\"data:application/octet-stream;base64,\"):0===a.indexOf(\"data:application/octet-stream;base64,\")}var O=\"glslang.wasm\";if(!ta()){var ua=O;O=c.locateFile?c.locateFile(ua,v):v+ua}function wa(){try{if(A)return new Uint8Array(A);if(w)return w(O);throw\"both async and sync fetching of the wasm failed\";}catch(a){D(a)}}\nfunction xa(){return A||!t&&!u||\"function\"!==typeof fetch?new Promise(function(a){a(wa())}):fetch(O,{credentials:\"same-origin\"}).then(function(a){if(!a.ok)throw\"failed to load wasm binary file at '\"+O+\"'\";return a.arrayBuffer()}).catch(function(){return wa()})}pa.push({J:function(){ya()}});var za=[null,[],[]],P=0;function Aa(){P+=4;return C[P-4>>2]}var Q={},Ba={};\nfunction Ca(){if(!R){var a={USER:\"web_user\",LOGNAME:\"web_user\",PATH:\"/\",PWD:\"/\",HOME:\"/home/web_user\",LANG:(\"object\"===typeof navigator&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\",_:r},b;for(b in Ba)a[b]=Ba[b];var d=[];for(b in a)d.push(b+\"=\"+a[b]);R=d}return R}var R;function S(a){return 0===a%4&&(0!==a%100||0===a%400)}function T(a,b){for(var d=0,e=0;e<=b;d+=a[e++]);return d}var U=[31,29,31,30,31,30,31,31,30,31,30,31],W=[31,28,31,30,31,30,31,31,30,31,30,31];\nfunction X(a,b){for(a=new Date(a.getTime());0<b;){var d=a.getMonth(),e=(S(a.getFullYear())?U:W)[d];if(b>e-a.getDate())b-=e-a.getDate()+1,a.setDate(1),11>d?a.setMonth(d+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else{a.setDate(a.getDate()+b);break}}return a}\nfunction Da(a,b,d,e){function g(a,b,d){for(a=\"number\"===typeof a?a.toString():a||\"\";a.length<b;)a=d[0]+a;return a}function f(a,b){return g(a,b,\"0\")}function h(a,b){function V(a){return 0>a?-1:0<a?1:0}var d;0===(d=V(a.getFullYear()-b.getFullYear()))&&0===(d=V(a.getMonth()-b.getMonth()))&&(d=V(a.getDate()-b.getDate()));return d}function n(a){switch(a.getDay()){case 0:return new Date(a.getFullYear()-1,11,29);case 1:return a;case 2:return new Date(a.getFullYear(),0,3);case 3:return new Date(a.getFullYear(),\n0,2);case 4:return new Date(a.getFullYear(),0,1);case 5:return new Date(a.getFullYear()-1,11,31);case 6:return new Date(a.getFullYear()-1,11,30)}}function z(a){a=X(new Date(a.A+1900,0,1),a.G);var b=n(new Date(a.getFullYear()+1,0,4));return 0>=h(n(new Date(a.getFullYear(),0,4)),a)?0>=h(b,a)?a.getFullYear()+1:a.getFullYear():a.getFullYear()-1}var m=C[e+40>>2];e={N:C[e>>2],M:C[e+4>>2],D:C[e+8>>2],C:C[e+12>>2],B:C[e+16>>2],A:C[e+20>>2],F:C[e+24>>2],G:C[e+28>>2],X:C[e+32>>2],L:C[e+36>>2],O:m?m?I(H,m,void 0):\n\"\":\"\"};d=d?I(H,d,void 0):\"\";m={\"%c\":\"%a %b %d %H:%M:%S %Y\",\"%D\":\"%m/%d/%y\",\"%F\":\"%Y-%m-%d\",\"%h\":\"%b\",\"%r\":\"%I:%M:%S %p\",\"%R\":\"%H:%M\",\"%T\":\"%H:%M:%S\",\"%x\":\"%m/%d/%y\",\"%X\":\"%H:%M:%S\",\"%Ec\":\"%c\",\"%EC\":\"%C\",\"%Ex\":\"%m/%d/%y\",\"%EX\":\"%H:%M:%S\",\"%Ey\":\"%y\",\"%EY\":\"%Y\",\"%Od\":\"%d\",\"%Oe\":\"%e\",\"%OH\":\"%H\",\"%OI\":\"%I\",\"%Om\":\"%m\",\"%OM\":\"%M\",\"%OS\":\"%S\",\"%Ou\":\"%u\",\"%OU\":\"%U\",\"%OV\":\"%V\",\"%Ow\":\"%w\",\"%OW\":\"%W\",\"%Oy\":\"%y\"};for(var l in m)d=d.replace(new RegExp(l,\"g\"),m[l]);var F=\"Sunday Monday Tuesday Wednesday Thursday Friday Saturday\".split(\" \"),\nva=\"January February March April May June July August September October November December\".split(\" \");m={\"%a\":function(a){return F[a.F].substring(0,3)},\"%A\":function(a){return F[a.F]},\"%b\":function(a){return va[a.B].substring(0,3)},\"%B\":function(a){return va[a.B]},\"%C\":function(a){return f((a.A+1900)/100|0,2)},\"%d\":function(a){return f(a.C,2)},\"%e\":function(a){return g(a.C,2,\" \")},\"%g\":function(a){return z(a).toString().substring(2)},\"%G\":function(a){return z(a)},\"%H\":function(a){return f(a.D,2)},\n\"%I\":function(a){a=a.D;0==a?a=12:12<a&&(a-=12);return f(a,2)},\"%j\":function(a){return f(a.C+T(S(a.A+1900)?U:W,a.B-1),3)},\"%m\":function(a){return f(a.B+1,2)},\"%M\":function(a){return f(a.M,2)},\"%n\":function(){return\"\\n\"},\"%p\":function(a){return 0<=a.D&&12>a.D?\"AM\":\"PM\"},\"%S\":function(a){return f(a.N,2)},\"%t\":function(){return\"\\t\"},\"%u\":function(a){return a.F||7},\"%U\":function(a){var b=new Date(a.A+1900,0,1),d=0===b.getDay()?b:X(b,7-b.getDay());a=new Date(a.A+1900,a.B,a.C);return 0>h(d,a)?f(Math.ceil((31-\nd.getDate()+(T(S(a.getFullYear())?U:W,a.getMonth()-1)-31)+a.getDate())/7),2):0===h(d,b)?\"01\":\"00\"},\"%V\":function(a){var b=n(new Date(a.A+1900,0,4)),d=n(new Date(a.A+1901,0,4)),e=X(new Date(a.A+1900,0,1),a.G);return 0>h(e,b)?\"53\":0>=h(d,e)?\"01\":f(Math.ceil((b.getFullYear()<a.A+1900?a.G+32-b.getDate():a.G+1-b.getDate())/7),2)},\"%w\":function(a){return a.F},\"%W\":function(a){var b=new Date(a.A,0,1),d=1===b.getDay()?b:X(b,0===b.getDay()?1:7-b.getDay()+1);a=new Date(a.A+1900,a.B,a.C);return 0>h(d,a)?f(Math.ceil((31-\nd.getDate()+(T(S(a.getFullYear())?U:W,a.getMonth()-1)-31)+a.getDate())/7),2):0===h(d,b)?\"01\":\"00\"},\"%y\":function(a){return(a.A+1900).toString().substring(2)},\"%Y\":function(a){return a.A+1900},\"%z\":function(a){a=a.L;var b=0<=a;a=Math.abs(a)/60;return(b?\"+\":\"-\")+String(\"0000\"+(a/60*100+a%60)).slice(-4)},\"%Z\":function(a){return a.O},\"%%\":function(){return\"%\"}};for(l in m)0<=d.indexOf(l)&&(d=d.replace(new RegExp(l,\"g\"),m[l](e)));l=Ea(d);if(l.length>b)return 0;B.set(l,a);return l.length-1}\nfunction Ea(a){for(var b=0,d=0;d<a.length;++d){var e=a.charCodeAt(d);55296<=e&&57343>=e&&(e=65536+((e&1023)<<10)|a.charCodeAt(++d)&1023);127>=e?++b:b=2047>=e?b+2:65535>=e?b+3:b+4}b=Array(b+1);ia(a,b,0,b.length);return b}\nvar Ga={f:function(){},c:function(){c.___errno_location&&(C[c.___errno_location()>>2]=63);return-1},n:function(a,b){P=b;try{var d=Aa();var e=Aa();if(-1===d||0===e)var g=-28;else{var f=Q.K[d];if(f&&e===f.U){var h=(void 0).T(f.S);Q.R(d,h,e,f.flags,f.offset);(void 0).W(h);Q.K[d]=null;f.P&&Fa(f.V)}g=0}return g}catch(n){return D(n),-n.I}},a:function(){},b:function(){D()},k:function(a,b,d){H.set(H.subarray(b,b+d),a)},l:function(a){var b=B.length;if(2147418112<a)return!1;for(var d=1;4>=d;d*=2){var e=b*(1+\n.2/d);e=Math.min(e,a+100663296);e=Math.max(16777216,a,e);0<e%65536&&(e+=65536-e%65536);a:{try{E.grow(Math.min(2147418112,e)-J.byteLength+65535>>16);ma(E.buffer);var g=1;break a}catch(f){}g=void 0}if(g)return!0}return!1},d:function(a,b){var d=0;Ca().forEach(function(e,g){var f=b+d;g=C[a+4*g>>2]=f;for(f=0;f<e.length;++f)B[g++>>0]=e.charCodeAt(f);B[g>>0]=0;d+=e.length+1});return 0},e:function(a,b){var d=Ca();C[a>>2]=d.length;var e=0;d.forEach(function(a){e+=a.length+1});C[b>>2]=e;return 0},h:function(){return 0},\nj:function(){return 0},g:function(a,b,d,e){try{for(var g=0,f=0;f<d;f++){for(var h=C[b+8*f>>2],n=C[b+(8*f+4)>>2],z=0;z<n;z++){var m=H[h+z],l=za[a];0===m||10===m?((1===a?x:y)(I(l,0)),l.length=0):l.push(m)}g+=n}C[e>>2]=g;return 0}catch(F){return D(F),F.I}},memory:E,o:function(){},i:function(){},m:function(a,b,d,e){return Da(a,b,d,e)},table:ea},Ha=function(){function a(a){c.asm=a.exports;L--;c.monitorRunDependencies&&c.monitorRunDependencies(L);0==L&&(null!==M&&(clearInterval(M),M=null),N&&(a=N,N=null,\na()))}function b(b){a(b.instance)}function d(a){return xa().then(function(a){return WebAssembly.instantiate(a,e)}).then(a,function(a){y(\"failed to asynchronously prepare wasm: \"+a);D(a)})}var e={env:Ga,wasi_snapshot_preview1:Ga};L++;c.monitorRunDependencies&&c.monitorRunDependencies(L);if(c.instantiateWasm)try{return c.instantiateWasm(e,a)}catch(g){return y(\"Module.instantiateWasm callback failed with error: \"+g),!1}(function(){if(A||\"function\"!==typeof WebAssembly.instantiateStreaming||ta()||\"function\"!==\ntypeof fetch)return d(b);fetch(O,{credentials:\"same-origin\"}).then(function(a){return WebAssembly.instantiateStreaming(a,e).then(b,function(a){y(\"wasm streaming compile failed: \"+a);y(\"falling back to ArrayBuffer instantiation\");d(b)})})})();return{}}();c.asm=Ha;var ya=c.___wasm_call_ctors=function(){return(ya=c.___wasm_call_ctors=c.asm.p).apply(null,arguments)};c._convert_glsl_to_spirv=function(){return(c._convert_glsl_to_spirv=c.asm.q).apply(null,arguments)};\nc._destroy_output_buffer=function(){return(c._destroy_output_buffer=c.asm.r).apply(null,arguments)};c._malloc=function(){return(c._malloc=c.asm.s).apply(null,arguments)};var Fa=c._free=function(){return(Fa=c._free=c.asm.t).apply(null,arguments)},ja=c.stackSave=function(){return(ja=c.stackSave=c.asm.u).apply(null,arguments)},G=c.stackAlloc=function(){return(G=c.stackAlloc=c.asm.v).apply(null,arguments)},ka=c.stackRestore=function(){return(ka=c.stackRestore=c.asm.w).apply(null,arguments)};\nc.dynCall_vi=function(){return(c.dynCall_vi=c.asm.x).apply(null,arguments)};c.dynCall_v=function(){return(c.dynCall_v=c.asm.y).apply(null,arguments)};c.asm=Ha;var Y;c.then=function(a){if(Y)a(c);else{var b=c.onRuntimeInitialized;c.onRuntimeInitialized=function(){b&&b();a(c)}}return c};N=function Ia(){Y||Z();Y||(N=Ia)};\nfunction Z(){function a(){if(!Y&&(Y=!0,!fa)){K(pa);K(qa);if(c.onRuntimeInitialized)c.onRuntimeInitialized();if(c.postRun)for(\"function\"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var a=c.postRun.shift();ra.unshift(a)}K(ra)}}if(!(0<L)){if(c.preRun)for(\"function\"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)sa();K(oa);0<L||(c.setStatus?(c.setStatus(\"Running...\"),setTimeout(function(){setTimeout(function(){c.setStatus(\"\")},1);a()},1)):a())}}c.run=Z;\nif(c.preInit)for(\"function\"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();Z();\n\n\n  return Module\n}\n);\n})();\nif (typeof exports === 'object' && \"object\" === 'object')\n      module.exports = Module;\n    else if (typeof define === 'function' && __webpack_require__.amdO)\n      define([], function() { return Module; });\n    else if (typeof exports === 'object')\n      exports[\"Module\"] = Module;\n    /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((() => {\n    const initialize = () => {\n        return new Promise(resolve => {\n            Module({\n                locateFile() {\n                    return \"glslang.wasm\";\n                },\n                onRuntimeInitialized() {\n                    resolve({\n                        compileGLSLZeroCopy: this.compileGLSLZeroCopy,\n                        compileGLSL: this.compileGLSL,\n                    });\n                },\n            });\n        });\n    };\n\n    let instance;\n    return () => {\n        if (!instance) {\n            instance = initialize();\n        }\n        return instance;\n    };\n})());\n\n//# sourceURL=webpack://demolishedwebgpu/./example/libs/glslang.js?");

/***/ }),

/***/ "./example/meshes/samples.js":
/*!***********************************!*\
  !*** ./example/meshes/samples.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.rectGeometry = void 0;\r\nconst Geometry_1 = __webpack_require__(/*! ../../src/Geometry */ \"./src/Geometry.js\");\r\nexports.rectGeometry = {\r\n    verticesType: Geometry_1.VERTEXType.xyzwrgba,\r\n    vertices: new Float32Array([\r\n        -1, 1, 0, 1, 0, 1, 1, 1,\r\n        -1, -1, 0, 1, 0, 1, 1, 1,\r\n        1, -1, 0, 1, 0, 1, 1, 1,\r\n        -1, 1, 0, 1, 0, 1, 1, 1,\r\n        1, -1, 0, 1, 0, 1, 1, 1,\r\n        1, 1, 0, 1, 0, 1, 1, 1,\r\n    ]),\r\n    indicies: new Uint16Array([0, 1, 2, 3, 4, 5,]),\r\n};\r\n\n\n//# sourceURL=webpack://demolishedwebgpu/./example/meshes/samples.js?");

/***/ }),

/***/ "./example/shaders/glsl/fractal.js":
/*!*****************************************!*\
  !*** ./example/shaders/glsl/fractal.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.fractalShader = void 0;\r\nexports.fractalShader = {\r\n    vertexEntryPoint: \"main\",\r\n    fragmentEntryPoint: \"main\",\r\n    vertex: /* wgsl */ `  \r\n    [[stage(vertex)]]\r\n    fn main([[location(0)]] pos: vec2<f32>)\r\n         -> [[builtin(position)]] vec4<f32> {\r\n        return vec4<f32>(pos, 0.0, 1.0);\r\n    }`,\r\n    fragment: /* wgsl */ `#version 450\r\n    #pragma shader_stage(fragment)\r\n    layout(set = 0, binding = 0) uniform Uniforms {\r\n        vec3 resolution;\r\n        float time;\r\n    } uniforms;\r\n  \r\n    layout(location = 0) out vec4 fragColor;\r\n\r\n\r\n    vec3 mcol=vec3(0.);\r\n    float randSeed;\r\n    void randomize(vec2 c){randSeed=fract(sin(dot(c,vec2(113.421,17.329)))*3134.1234);}\r\n    float rand(){return fract(sin(randSeed++)*3143.45345);}\r\n\r\n    float DE(vec3 p){\r\n\tconst vec3 CSize=vec3(.63248,.78632,.875);\r\n\tfloat DEfactor=1.;\r\n\tfor(int i=0;i<5;i++){\r\n\t\tp=2.*clamp(p,-CSize,CSize)-p;\r\n\t\tfloat k=max(.70968/dot(p,p),1.);\r\n\t\tp*=k;DEfactor*=k;\r\n\t}\r\n\tif(mcol.r>=0.)mcol+=abs(p);\r\n\tfloat rxy=length(p.xy);\r\n\treturn max(rxy-.92784,abs(rxy*p.z)/length(p))/DEfactor;\r\n}\r\n\r\nfloat map(vec3 p){\r\n\treturn DE(p);\r\n}\r\n\r\nvec3 normal(in vec3 p){\r\n\t//    vec2 e = vec2(0.005, -0.005);\r\n\tvec2 e=vec2(1.,-1.)*.5773*.0005;\r\n\treturn normalize(e.xyy*map(p+e.xyy)+e.yyx*map(p+e.yyx)+e.yxy*map(p+e.yxy)+e.xxx*map(p+e.xxx));\r\n}\r\nmat3 calcLookAtMatrix(in vec3 ro,in vec3 ta,in float roll)\r\n{\r\n\tvec3 ww=normalize(ta-ro);\r\n\tvec3 uu=normalize(cross(ww,vec3(sin(roll),cos(roll),0.)));\r\n\tvec3 vv=normalize(cross(uu,ww));\r\n\treturn mat3(uu,vv,ww);\r\n}\r\nvoid doCamera(out vec3 camPos,out vec3 camTar,in float time)\r\n{\r\n\tfloat an=.3*time+10.;\r\n\tcamPos=vec3(2.772*sin(an),.424,.820*cos(an));\r\n\tcamTar=vec3(1.,.000,-.03);\r\n}\r\n\r\n\r\nvec3 path(float t){\r\n\treturn vec3(cos(t),sin(t),-.65+abs(sin(t*.7))*.25)*(2.+sin(t*1.7)*.5)+vec3(0.,0.,1.);\r\n}\r\n\r\nvec3 post(vec3 rgb){\r\n\treturn rgb;\r\n}\r\n\r\nvec4 scene(vec3 ro,vec3 rd,float slider,float time,float pxl){\r\n\t\r\n\trandomize(gl_FragCoord.xy+time);\r\n\t\r\n\tvec3 LP=path(time+1.),p;\r\n\tLP.z+=slider;\r\n\tro.z-=slider;\r\n\t\r\n\tfloat d=map(ro)*.8,t=d*rand(),nt=d,od=1.,ft=0.;\r\n\t\r\n\tvec4 col=vec4(0.,0.,0.,1.);\r\n\t\r\n\tvec4 am,tm=vec4(-1.);\r\n\t\r\n\tfor(int i=0;i<99;i++){\r\n\t\t\r\n\t\tif(nt>t+ft){\r\n\t\t\tp=ro+rd*(t+ft);\r\n\t\t\tp+=(LP-p)*(-p.z)/(LP.z-p.z);\t\t\r\n\t\t}else{\r\n\t\t\tp=ro+rd*t;\r\n\t\t}\r\n\t\t\r\n\t\td=map(p);\r\n\t\t\r\n\t\tif(nt>t+ft){\r\n\t\t\tfloat dL=.05*length(ro+rd*(t+ft)-LP);\r\n\t\t\t\r\n\t\t\tcol.rgb+=col.a*vec3(1.,1.,.7)*exp(-dL*40.)*smoothstep(0.,.01,d);\r\n\t\t\t\r\n\t\t\tif(t+ft+dL>nt){\r\n\t\t\t\tft=0.;\r\n\t\t\t\tt=nt;\r\n\t\t\t\tif(t>20.)break;\r\n\t\t\t}else ft+=dL;\r\n\t\t}else{\r\n\t\t\tif(d<od&&tm.w<0.){\r\n\t\t\t\tfloat alpha=clamp(d/(pxl*t),0.,1.);\r\n\t\t\t\tif(alpha<.95){\r\n\t\t\t\t\tam=vec4(alpha,am.xyz);tm=vec4(t,tm.xyz);\r\n\t\t\t\t\tcol.a*=alpha;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tod=d;\r\n\t\t\tnt=t+d*(.6+.2*rand());\r\n\t\t}\r\n\t}\r\n\t\r\n\tvec3 tcol=vec3(0.);\r\n\t\r\n\tfor(int i=0;i<4;i++){\r\n\t\t\r\n\t\tif(tm.x<0.)continue;\r\n\r\n\t\tmcol=vec3(0.);\r\n\r\n\t\tp=ro+rd*tm.x;\r\n\t\t\r\n\t\tvec3 N=normal(p),L=LP-p;\r\n\t\t\r\n\t\tvec3 scol;\r\n\t\t\r\n\t\tmcol=sin(mcol)*.3+vec3(.8,.6,.4);\r\n\t\tfloat ls=exp(-dot(L,L)*.2);\r\n\t\tp+=L*(-p.z)/L.z;\r\n\t\t\r\n\t\tL=normalize(L);\r\n\t\t\r\n\t\tscol=ls*mcol*max(0.,dot(N,L));\r\n\t\t\r\n\t\tfloat v=max(0.,dot(N,-rd));\r\n\t\t\r\n\t\tscol+=exp(-t)*mcol*v;\r\n\t\td=smoothstep(0.,.005,map(p));\r\n\t\tscol+=ls*vec3(2.,2.,1.7)*max(0.,dot(N,L))*d;\r\n\t\t\r\n\t\tif(rd.z<0.&&d>0.)scol+=ls*vec3(4.,3.,1.4)*pow(max(0.,dot(reflect(rd,N),L)),5.)*(1.-.25*v)*d;\r\n\t\t\r\n\t\ttcol=mix(scol,tcol,am.x);\r\n\t\t\r\n\t\tam=am.yzwx;\r\n\t\ttm=tm.yzwx;\r\n\t}\r\n\t\r\n\tcol.rgb=clamp(col.rgb+tcol,0.,1.);\r\n\t\r\n\treturn vec4(post(col.rgb),t);\r\n\r\n}\r\n\r\nvoid main(){\r\n\t\r\n    float time = uniforms.time;\r\n    vec2 resolution = uniforms.resolution.xy;\r\n    vec2 mouse = vec2(0.5);\r\n\tfloat tm;\r\n\tfloat glow,eglow,totdist=glow=.3;\r\n\tvec2 p=(gl_FragCoord.xy/resolution.xy)+mouse/4.;\r\n\t\r\n\tvec3 ro,ta;\r\n\tdoCamera(ro,ta,time*.1);\r\n\t\r\n\ttm=mod(time,18.85);\r\n\t\r\n\tmat3 camMat=calcLookAtMatrix(ro,ta,0.);\r\n\t\r\n\tvec3 rd=normalize(camMat*vec3(p.xy,1.5+2.));\r\n\t\r\n\tvec4 final=scene(ro,rd,.3,tm*.12,3./resolution.y);\r\n\t\r\n\tfragColor=final;\r\n\t\r\n}`,\r\n};\r\n\n\n//# sourceURL=webpack://demolishedwebgpu/./example/shaders/glsl/fractal.js?");

/***/ }),

/***/ "./src/Geometry.js":
/*!*************************!*\
  !*** ./src/Geometry.js ***!
  \*************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Geometry = exports.DefaultIndicies = exports.VERTEXType = void 0;\r\nvar VERTEXType;\r\n(function (VERTEXType) {\r\n    VERTEXType[VERTEXType[\"xyz\"] = 3] = \"xyz\";\r\n    VERTEXType[VERTEXType[\"xyzw\"] = 4] = \"xyzw\";\r\n    VERTEXType[VERTEXType[\"xyzrgba\"] = 7] = \"xyzrgba\";\r\n    VERTEXType[VERTEXType[\"xyzwrgba\"] = 8] = \"xyzwrgba\";\r\n})(VERTEXType = exports.VERTEXType || (exports.VERTEXType = {}));\r\nexports.DefaultIndicies = new Uint16Array([0, 1, 2, 3, 4, 5]);\r\n// let createBuffer = (arr: Float32Array | Uint16Array, usage: number) => {\r\n//     let desc = {\r\n//         size: (arr.byteLength + 3) & ~3,\r\n//         usage,\r\n//         mappedAtCreation: true\r\n//     };\r\n//     let buffer = this.device.createBuffer(desc);\r\n//     const writeArray =\r\n//         arr instanceof Uint16Array\r\n//             ? new Uint16Array(buffer.getMappedRange())\r\n//             : new Float32Array(buffer.getMappedRange());\r\n//     writeArray.set(arr);\r\n//     buffer.unmap();\r\n//     return buffer;\r\n//};\r\nclass Geometry {\r\n    constructor(device, model) {\r\n        this.device = device;\r\n        this.model = model;\r\n        this.vertexBuffer = this.createBuffer(model.vertices, GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST, model.verticesType);\r\n        this.indexBuffer = this.createBuffer(model.indicies, GPUBufferUsage.INDEX, 3);\r\n        this.numOfVerticles = model.vertices.length / model.verticesType;\r\n    }\r\n    createBuffer(arr, usage, vertexSize) {\r\n        let desc = {\r\n            size: (arr.byteLength + vertexSize) & ~vertexSize,\r\n            usage,\r\n            mappedAtCreation: true\r\n        };\r\n        let buffer = this.device.createBuffer(desc);\r\n        const writeArray = arr instanceof Uint16Array\r\n            ? new Uint16Array(buffer.getMappedRange())\r\n            : new Float32Array(buffer.getMappedRange());\r\n        writeArray.set(arr);\r\n        buffer.unmap();\r\n        return buffer;\r\n    }\r\n    vertexBufferLayout(shaderLocation) {\r\n        const vertexBufferLayout = {\r\n            attributes: [{\r\n                    shaderLocation: shaderLocation,\r\n                    offset: 0,\r\n                    format: 'float32x2'\r\n                }],\r\n            arrayStride: 4 * this.model.verticesType,\r\n            stepMode: 'vertex'\r\n        };\r\n        return vertexBufferLayout;\r\n    }\r\n}\r\nexports.Geometry = Geometry;\r\n\n\n//# sourceURL=webpack://demolishedwebgpu/./src/Geometry.js?");

/***/ }),

/***/ "./src/Material.js":
/*!*************************!*\
  !*** ./src/Material.js ***!
  \*************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Material = exports.defaultWglslVertex = void 0;\r\nexports.defaultWglslVertex = `  \r\nstruct VertexInput {\r\n  [[location(0)]] pos: vec2<f32>;\r\n};  \r\nstruct VertexOutput {\r\n  [[builtin(position)]] pos: vec4<f32>;\r\n  [[location(0)]] uv: vec2<f32>;\r\n};  \r\n[[stage(vertex)]]\r\nfn main_vertex(input: VertexInput) -> VertexOutput {\r\n  var output: VertexOutput;\r\n  var pos: vec2<f32> = input.pos * 2.0 - 1.0;\r\n  output.pos = vec4<f32>(pos, 0.0, 1.0);\r\n  output.uv = input.pos;\r\n  return output;\r\n}`;\r\nclass Material {\r\n    constructor(device, shader) {\r\n        this.device = device;\r\n        this.shader = shader;\r\n        this.vertexShaderModule = this.device.createShaderModule({\r\n            code: shader.vertex,\r\n        });\r\n        this.fragmentShaderModule = this.device.createShaderModule({\r\n            code: shader.fragment\r\n        });\r\n    }\r\n    static createMaterialShader(spirvVert, spirvFrag, vertexEntryPoint, fragmentEntryPoint) {\r\n        const material = {\r\n            fragment: spirvFrag,\r\n            fragmentEntryPoint: fragmentEntryPoint,\r\n            vertex: spirvVert,\r\n            vertexEntryPoint: vertexEntryPoint\r\n        };\r\n        return material;\r\n    }\r\n}\r\nexports.Material = Material;\r\n\n\n//# sourceURL=webpack://demolishedwebgpu/./src/Material.js?");

/***/ }),

/***/ "./src/Mesh.js":
/*!*********************!*\
  !*** ./src/Mesh.js ***!
  \*********************/
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Mesh = void 0;\r\nclass Mesh {\r\n    constructor(device, geometry, material, numOfTextures = 0) {\r\n        this.device = device;\r\n        this.geometry = geometry;\r\n        this.material = material;\r\n        const layoutEntrys = [\r\n            {\r\n                binding: 0,\r\n                visibility: window.GPUShaderStage.FRAGMENT,\r\n                buffer: {\r\n                    type: \"uniform\"\r\n                }\r\n            }\r\n        ];\r\n        if (numOfTextures > 0) {\r\n            layoutEntrys.push({\r\n                binding: 1,\r\n                visibility: window.GPUShaderStage.FRAGMENT,\r\n                sampler: {\r\n                    type: \"filtering\"\r\n                }\r\n            });\r\n            for (let i = 0; i < numOfTextures; i++) {\r\n                layoutEntrys.push({\r\n                    binding: 2 + i,\r\n                    visibility: window.GPUShaderStage.FRAGMENT,\r\n                    texture: {\r\n                        sampleType: \"float\"\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        this.bindGroupLayout = this.device.createBindGroupLayout({\r\n            entries: layoutEntrys\r\n        });\r\n        this.pipelineLayout = this.device.createPipelineLayout({\r\n            bindGroupLayouts: [this.bindGroupLayout],\r\n        });\r\n    }\r\n    pipelineDescriptor() {\r\n        const pipelineDescriptor = {\r\n            vertex: {\r\n                module: this.material.vertexShaderModule,\r\n                entryPoint: this.material.shader.vertexEntryPoint || 'main_vertex',\r\n                buffers: [this.geometry.vertexBufferLayout(0)]\r\n            },\r\n            fragment: {\r\n                module: this.material.fragmentShaderModule,\r\n                entryPoint: this.material.shader.fragmentEntryPoint || 'main_fragment',\r\n                targets: [{\r\n                        format: 'bgra8unorm'\r\n                    }]\r\n            },\r\n            // depthStencil: {\r\n            //     format: 'depth32float',\r\n            //     depthWriteEnabled: true,\r\n            //     depthCompare: 'less'\r\n            // },\r\n            primitive: {\r\n                topology: 'triangle-list',\r\n            },\r\n            layout: this.pipelineLayout\r\n        };\r\n        return pipelineDescriptor;\r\n    }\r\n}\r\nexports.Mesh = Mesh;\r\n\n\n//# sourceURL=webpack://demolishedwebgpu/./src/Mesh.js?");

/***/ }),

/***/ "./src/Renderer.js":
/*!*************************!*\
  !*** ./src/Renderer.js ***!
  \*************************/
/***/ (function(__unused_webpack_module, exports) {

eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Renderer = void 0;\r\nclass Renderer {\r\n    //uniforms: Float32Array;\r\n    constructor(canvas) {\r\n        this.canvas = canvas;\r\n        //  this.textures = new Array<GPUTexture>();\r\n    }\r\n    getDevice(config) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const device = yield this.initializeAPI();\r\n            if (device) {\r\n                this.context = this.canvas.getContext('webgpu');\r\n                const presentationFormat = this.context.getPreferredFormat(this.adapter);\r\n                const canvasConfig = config || {\r\n                    device: this.device,\r\n                    format: presentationFormat,\r\n                    usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC\r\n                };\r\n                this.context.configure(canvasConfig);\r\n                return device;\r\n            }\r\n        });\r\n    }\r\n    initializeAPI() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const entry = navigator.gpu;\r\n                if (!entry) {\r\n                    throw \"Cannot initalize WebGPU \";\r\n                }\r\n                this.adapter = yield entry.requestAdapter();\r\n                this.device = yield this.adapter.requestDevice();\r\n                this.queue = this.device.queue;\r\n            }\r\n            catch (e) {\r\n                throw \"Cannot initalize WebGPU \";\r\n            }\r\n            return this.device;\r\n        });\r\n    }\r\n    // updateCustomUniform(index:number,value:Float32Array){\r\n    //     this.scene.mesh.uniformBufferArray.set(value,index)\r\n    // }\r\n    //async initialize(geometry:Geometry,material:Material,texture?:Array<ITexture>,customUniforms?:Float32Array,samplers?:Array<GPUSamplerDescriptor>): Promise<void> {\r\n    addScene(scene) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.scene = scene;\r\n            // if(scene.customUniforms){ // extend uniforms if custom is passeds\r\n            //         uniforms.set(uniforms,4)\r\n            // }        \r\n            //  const mesh = scene.getMesh();\r\n            this.renderPipeline = this.device.createRenderPipeline(this.scene.getMesh().pipelineDescriptor());\r\n            this.bindingGroup = this.device.createBindGroup({\r\n                layout: this.renderPipeline.getBindGroupLayout(0),\r\n                entries: scene.bindingGroupEntrys,\r\n            });\r\n        });\r\n    }\r\n    draw(time) {\r\n        this.commandEncoder = this.device.createCommandEncoder();\r\n        const clearColor = { r: 0.0, g: 0.0, b: 0.0, a: 1.0 };\r\n        const renderPassDescriptor = {\r\n            colorAttachments: [{\r\n                    loadValue: clearColor,\r\n                    storeOp: 'store',\r\n                    view: this.context.getCurrentTexture().createView()\r\n                }]\r\n        };\r\n        const passEncoder = this.commandEncoder.beginRenderPass(renderPassDescriptor);\r\n        this.scene.setUniforms([time], 3); // time\r\n        this.scene.updateUniformBuffer();\r\n        passEncoder.setPipeline(this.renderPipeline);\r\n        passEncoder.setVertexBuffer(0, this.scene.getMesh().geometry.vertexBuffer);\r\n        passEncoder.setBindGroup(0, this.bindingGroup);\r\n        passEncoder.setIndexBuffer(this.scene.getMesh().geometry.indexBuffer, 'uint16');\r\n        passEncoder.drawIndexed(6, 1);\r\n        //passEncoder.draw(6, 1, 0, 0);\r\n        passEncoder.endPass();\r\n        this.device.queue.submit([this.commandEncoder.finish()]);\r\n    }\r\n    start(t, maxFps = 200) {\r\n        let startTime = null;\r\n        let frame = -1;\r\n        const renderLoop = (timestamp) => {\r\n            if (!startTime)\r\n                startTime = timestamp;\r\n            let segment = Math.floor((timestamp - startTime) / (1000 / maxFps));\r\n            if (segment > frame) {\r\n                frame = segment;\r\n                this.frame = frame;\r\n                this.draw(timestamp / 1000);\r\n            }\r\n            if (!this.isPaused)\r\n                requestAnimationFrame(renderLoop);\r\n        };\r\n        renderLoop(t);\r\n    }\r\n    pause() {\r\n        this.isPaused = !this.isPaused;\r\n    }\r\n}\r\nexports.Renderer = Renderer;\r\n\n\n//# sourceURL=webpack://demolishedwebgpu/./src/Renderer.js?");

/***/ }),

/***/ "./src/Scene.js":
/*!**********************!*\
  !*** ./src/Scene.js ***!
  \**********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Scene = void 0;\r\nconst TextureLoader_1 = __webpack_require__(/*! ./TextureLoader */ \"./src/TextureLoader.js\");\r\nclass Scene {\r\n    constructor(key, device, canvas) {\r\n        this.key = key;\r\n        this.device = device;\r\n        this.canvas = canvas;\r\n        this.meshes = new Map();\r\n        this.textures = new Array();\r\n        this.bindingGroupEntrys = new Array();\r\n        const dpr = window.devicePixelRatio || 1;\r\n        const uniforms = new Float32Array([this.canvas.width * dpr, this.canvas.height * dpr, dpr, 0]);\r\n        this.uniformBuffer = this.device.createBuffer({\r\n            size: 40,\r\n            usage: window.GPUBufferUsage.UNIFORM | window.GPUBufferUsage.COPY_DST,\r\n        });\r\n        this.uniformBufferArray = uniforms;\r\n        this.updateUniformBuffer();\r\n        // this.setUniforms(uniforms,0);\r\n    }\r\n    getMesh(index = 0) {\r\n        return Array.from(this.meshes.values())[index];\r\n    }\r\n    setDimensions(width, height, dpr = 0) {\r\n        this.setUniforms([width, height, dpr], 0);\r\n    }\r\n    setUniforms(values, offset) {\r\n        this.uniformBufferArray.set(values, offset); // time \r\n    }\r\n    updateUniformBuffer() {\r\n        this.device.queue.writeBuffer(this.uniformBuffer, 0, this.uniformBufferArray.buffer, this.uniformBufferArray.byteOffset, this.uniformBufferArray.byteLength);\r\n    }\r\n    build(key, customUniforms, textures, samplers) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            for (let i = 0; i < textures.length; i++) {\r\n                this.textures.push(yield TextureLoader_1.TextureLoader.createTexture(this.device, textures[i]));\r\n            }\r\n            this.bindingGroupEntrys = [{\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: this.uniformBuffer\r\n                    }\r\n                }];\r\n            let textureBindingOffset = (samplers ? samplers.length : 0);\r\n            // add a default sampler if there is textures passed \r\n            if (this.textures.length > 0 && !samplers) {\r\n                const sampler = this.device.createSampler({\r\n                    addressModeU: 'repeat',\r\n                    addressModeV: 'repeat',\r\n                    magFilter: 'linear',\r\n                    minFilter: 'nearest'\r\n                });\r\n                this.bindingGroupEntrys.push({\r\n                    binding: 1,\r\n                    resource: sampler\r\n                });\r\n                textureBindingOffset = 2;\r\n            }\r\n            else {\r\n                samplers.forEach((value, index) => {\r\n                    const sampler = this.device.createSampler(value);\r\n                    this.bindingGroupEntrys.push({\r\n                        binding: index + 1,\r\n                        resource: sampler\r\n                    });\r\n                    textureBindingOffset++;\r\n                });\r\n            }\r\n            this.textures.forEach((t, i) => {\r\n                const entry = {\r\n                    binding: i + textureBindingOffset,\r\n                    resource: t.createView()\r\n                };\r\n                this.bindingGroupEntrys.push(entry);\r\n            });\r\n        });\r\n    }\r\n    addMesh(key, mesh) {\r\n        this.meshes.set(key, mesh);\r\n    }\r\n    removeMesh(key) {\r\n        return this.meshes.delete(key);\r\n    }\r\n}\r\nexports.Scene = Scene;\r\n\n\n//# sourceURL=webpack://demolishedwebgpu/./src/Scene.js?");

/***/ }),

/***/ "./src/TextureLoader.js":
/*!******************************!*\
  !*** ./src/TextureLoader.js ***!
  \******************************/
/***/ (function(__unused_webpack_module, exports) {

eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.TextureLoader = void 0;\r\nclass TextureLoader {\r\n    constructor() {\r\n    }\r\n    /**\r\n     * Load and create an GPUTexture from an Image\r\n     *\r\n     * @static\r\n     * @param {GPUDevice} device\r\n     * @param {string} src\r\n     * @return {*}  {Promise<GPUTexture>}\r\n     * @memberof TextureLoader\r\n     */\r\n    static createTexture(device, src) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const image = new Image();\r\n            image.src = src.path;\r\n            yield image.decode();\r\n            const imageBitmap = yield createImageBitmap(image);\r\n            const textureSize = { width: image.width, height: image.height };\r\n            const texture = device.createTexture({\r\n                label: src.key,\r\n                size: textureSize,\r\n                dimension: '2d',\r\n                format: 'rgba8unorm',\r\n                usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING\r\n            });\r\n            device.queue.copyExternalImageToTexture({\r\n                source: imageBitmap\r\n            }, {\r\n                texture: texture,\r\n                mipLevel: 0\r\n            }, textureSize);\r\n            return texture;\r\n        });\r\n    }\r\n}\r\nexports.TextureLoader = TextureLoader;\r\n\n\n//# sourceURL=webpack://demolishedwebgpu/./src/TextureLoader.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/amd options */
/******/ 	(() => {
/******/ 		__webpack_require__.amdO = {};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/harmony module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.hmd = (module) => {
/******/ 			module = Object.create(module);
/******/ 			if (!module.children) module.children = [];
/******/ 			Object.defineProperty(module, 'exports', {
/******/ 				enumerable: true,
/******/ 				set: () => {
/******/ 					throw new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);
/******/ 				}
/******/ 			});
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./example/Example.js");
/******/ 	
/******/ })()
;